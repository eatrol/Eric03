<!----phaser 學習 lesson 2 

教學網址: https://medium.com/i-am-mike/phaser-js-%E7%9A%842d%E9%81%8A%E6%88%B2%E9%96%8B%E7%99%BC%E5%85%A5%E9%96%80-part-3-3147fbfce000


遊戲素材網：https://itch.io/game-assets/free/tag-2d

目的： 1. 增加遊戲主角 雪碧圖 及行走動畫
      2. 在config設定物理特性,重力
      3. 套用在主角及地板

--->

<html>
<head>
<title>phaser game 1</title>
<script src="//cdn.jsdelivr.net/npm/phaser@3.52.0/dist/phaser.js"></script>
<script src="//cdn.jsdelivr.net/npm/phaser@3.52.0/dist/phaser.min.js"></script>

<script type="text/javascript">

// 基本設定
const gameStart = {
    key: 'gameStart',
    preload: function(){
        // 載入資源
        this.load.image('bg1', 'jungle/bg/plx-1.png');
        this.load.image('bg2', 'jungle/bg/plx-2.png');
        this.load.image('bg3', 'jungle/bg/plx-3.png');
        this.load.image('bg4', 'jungle/bg/plx-4.png');
        this.load.image('bg5', 'jungle/bg/plx-5.png');
        this.load.image('bg6', 'jungle/bg/foot.png');

        this.load.spritesheet('user', 'jungle/runSheet.png', {frameWidth: 116, frameHeight: 66});
       // this.load.spritesheet('user', 'jungle/mario1.png', {frameWidth: 75, frameHeight: 100});
    },
    create: function(){
        // 資源載入完成，在世界加入遊戲物件及相關設定
        this.bg1 = this.add.tileSprite(400, 300, 800, 600, 'bg1'); //遊戲中心X,遊戲中心Y,遊戲世界長,遊戲世界寬
        this.bg2 = this.add.tileSprite(400, 300, 800, 600, 'bg2');
        this.bg3 = this.add.tileSprite(400, 300, 800, 600, 'bg3');
        this.bg4 = this.add.tileSprite(400, 300, 800, 600, 'bg4');
        this.bg5 = this.add.tileSprite(400, 300, 800, 600, 'bg5');

        // 加入地板, 並設定物理條件
        this.bg6 = this.add.tileSprite(400, 470, 800, 600, 'bg6');

        this.physics.add.existing(this.bg6);
        // 設定物件不會動靜止不會掉下去
        this.bg6.body.immovable = true;
        // 物件的位置和旋轉是否受其速度，加速度，阻力和重力的影響
        this.bg6.body.moves = false;

       
        this.player = this.physics.add.sprite(400, 100, 'user');
        this.player.setScale(1);
        this.anims.create({
            key: 'run',
            frames: this.anims.generateFrameNumbers('user', { start: 0, end: 5 }),
            frameRate: 10,
            repeat: -1
        })

      
        //設定角色彈跳值
        this.player.setBounce(0.5);
        //設定角色碰撞邊界
        this.player.setSize(110, 66, 0);
        //將需要碰撞的物件綁在一起
        this.physics.add.collider(this.player, this.bg6);

        // 播放主角'run'的動畫
        this.player.anims.play('run',true)

    },

    update: function(){
        // 遊戲狀態更新
        this.bg1.tilePositionX += 3;
        this.bg2.tilePositionX += 3;
        this.bg3.tilePositionX += 3;
        this.bg4.tilePositionX += 3;
        this.bg5.tilePositionX += 3;
        this.bg6.tilePositionX += 3;
    }
}

const config = {
    type: Phaser.CANVAS,  // 渲染方式 phaser.WEBGL 或 phaser.CANVAS  或 phaser.AUTO
    width: 800,
    height: 200,
    parent: 'app',
    physics: {                 //  物理設定
         default: 'arcade',    // 設定物理世界為'arcade' , 參數為重力 1500
         arcade: {
             gravity: {
                 y: 1500
             }
         },
     },

     scene: [ gameStart]
}


const game = new Phaser.Game(config); // 建立遊戲世界







</script>


</head>

<body>

    <div id=’app’></div>

</body>

</html>